<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Example</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        border: 0;
      }

      #root p {
        color: white;
        font-size: 20px;
        background-color: green;
        text-align: center;
        width: 20px;
      }

      #btn_plus {
        background-color: red;
        border: 2px solid #000;
        font-size: 15px;
        width: 200px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <button id="btn_plus"></button>
    <script
      crossorigin
      src="https://unpkg.com/react@17/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>


    <script type="text/babel">
      console.log(React)
      console.log(ReactDOM)
      // const root = document.querySelector('#root')
      // const btn_plus = document.querySelector('#btn_plus')

      // let i = 0

      // root.innerHTML = '<p>init : 0</p>'
      // btn_plus.addEventListener('click', () => {
      //     root.innerHTML = `<p>init : ${++i}</p>`

      // })

      // const component = {
      //     message: 'init',
      //     count: 0,
      //     render() {
      //         return `<p>${this.message} : ${thie.count}</p>`;
      //     }
      // };

      // function render(rootElement, component) {
      //     rootElement.innerHTML = component.render();
      // }

      // // 초기화
      // render(document.querySelector('#root'), component)

      // document.querySelector('#btn_plus').addEventListener('click', () => {
      //     component.message = 'update';
      //     component.count = component.count + 1;

      //     render(document.querySelector('#root'), component)
      // })

      //<p 2번째인자>"3번째인자" </p>
      // const Component = props => { //컴포넌트의 모습 정의
      //     return React.createElement('p', null, `${props.message} : ${props.count}`) //리액트의 Element를 리턴해야함
      // }

      // ReactDOM.render(/* 리액트 컴포넌트*/React.createElement(Component, {message: 'init', count: 0}, null),
      //  document.querySelector('#root')/* 컴포넌트가 그려줄 곳*/);

      // document.querySelector('#btn_plus').addEventListener('click', () => {
      //     ReactDOM.render(
      //         React.createElement(
      //             Component,
      //             {message: 'update', count: 10},
      //              null),
      //         document.querySelector('#root')
      //     );
      // })

      // // 정의
      // class ClassComponent extends React.Component {
      //     render() {
      //         return <div>Hello</div>;
      //     }
      // }

      // // 사용
      // ReactDOM.render(
      //     <ClassComponent />,
      //     document.querySelector('#root')
      // )

      // // 정의 1
      // function FunctionComponent() {
      //     return <div>Hello</div>;
      // }

      // // 정의 2
      // const FunctionComponent = () => <div>Hello</div>;

      // // 사용
      // ReactDOM.render(
      //     <FunctionComponent />,
      //     document.querySelector('#root')
      //     )

      // React.createElement(
      //     type, // 태그 이름 (문자열) | 리액트 컴포넌트 | React.Fragment
      //     [props], // 리액트 컴포넌트에 넣어주는 데이터 객체
      //     [...children] // 자식으로 넣어주는 요소들
      // )

      // // 1. 태그 이름 문자열 type
      // //<h1>type 이 "태그 이름 문자열" 입니다.</h1>
      // ReactDOM.render(
      //     React.createElement('h1', null, `type 이 "태그 이름 문자열" 입니다.`),
      //     document.querySelector('#root')
      // );

      // // 2. 리액트 컴포넌트 type
      // const Component = () => {
      //     return React.createElement(
      //         'p',
      //         null,
      //         `type 이 "리액트 컴포넌트" 입니다.`
      //         )
      // }

      // // <Component></Component> => <component /> => <p>type 이 "리액트 컴포넌트" 입니다.</p>
      // ReactDOM.render(
      //     React.createElement(Component, null, null),
      //     document.querySelector('#root')
      // )

      // // 3. React.Fragment
      // // root 아래에 태그 없이 배열처럼 바로 여러개 삽입됨
      // ReactDOM.render(
      //     React.createElement(
      //         React.Fragment,
      //         null,
      //         `type이 "React Fragment" 입니다`,
      //         `type이 "React Fragment" 입니다`,
      //         `type이 "React Fragment" 입니다`
      //     ),
      //     document.querySelector('#root')
      // )

      // // 4. 복잡한 리액트 Element 모임
      // // <h1>안녕하세요</h1>
      // // <div><div><h1>주제</h1><ul><li>React</li><li>Vue</li></ul></div></div>

      // ReactDOM.render(
      //     React.createElement(
      //         'div',
      //         null,
      //         React.createElement(
      //             'div',
      //             null,
      //             React.createElement('h1', null, '주제'),
      //             React.createElement(
      //                 'ul',
      //                 null,
      //                 React.createElement('li', null, 'React'),
      //                 React.createElement('li', null, 'Vue')
      //                 )
      //         )
      //     ),
      //     document.querySelector('#root')
      // )

    //     // 우리가 작성한 어떤 코드 => 순수하게 실행할 수 있는 자바스크립트
    //     // babel (현재 브라우저가 이해할 수 있는 JS 문법으로 변환해줌)
    //   ReactDOM.render(
    //     //{a: "a"}. JSX 가 변환하여 두번째 인자로 들어감
    //     <div a="a">
    //       <div>
    //         <h1>{"주제"}</h1>
    //         <ul>
    //           <li>React</li>
    //           <li>Vue</li>
    //         </ul>
    //       </div>
    //     </div>   
    //     ,
    //     document.querySelector('#root'),
    //   )

    // {message: '안녕하세여!'}. message 값이 바뀌면 다시 그려짐(render)
    // function Component(props /*객체*/) {
    //     return 
    //         <div> 
    //             <h1>{props.message} 이것은 함수로 만든 컴포넌트 입니다.</h1> 
    //         </div>
    // }

    // Component.defaultProps = {
    //     message: '기본값'
    // }

    class Component extends React.Component {
        state = { //state 는 항상 객체
            count: 0,
        };

        constructor(props) {
            super(props); // React.Component의 생성자 호출

            this.state = {count: 0} //정의 방법 2.
        }

        render() {
            return 
                <div> 
                    <h1>{this.props.message} 이것은 클래스로 만든 컴포넌트 입니다.</h1> 
                    <p> {this.state.count}</p>
                </div>
        }

    // 동작하지 않음.
    // State 변경시
    componentDidMount() {
        setTimeout(() => {
            this.setState({
                count: this.state.count + 1,
            })
            this.setState((previousState) => {
                const newState = {count: previousState.count + 1};
                return newState
            })
        }, 1000);
    };

        static defaultProps = {
            message: '기본값',
        }
    };


    function Component() {
        return (
            <div>
                <button onClick={() => {
                    console.log('click');
                    }}>클릭
                </button>
            </div>);
    }

    class Component extends React.Component {
        state = {
            count: 0,
        };

        constructor(props) {
            super(props);

            // 방법 1
            this.click = this.click.bind(this); //click 메소드에 bind
        }
        render() {
            return (
            <div>
                <p>{this.state.count}</p>
                <button onClick={this.click}>클릭</button>
            </div>);
        }


        click() {
            console.log('click');
            this.setState((state) => ({
                ... state, 
                count: state.count + 1
            }));
                    
        }

        //방법 2. 화살표 함수는 바인딩 안해도 적용됨
        click = () => {

            console.log('click');
            this.setState((state) => ({
                ... state, 
                count: state.count + 1
            }));
                    
        }
    }
    ReactDOM.render(
        <Component />,
        document.querySelector('#root')
        )
    </script>
  </body>
</html>
